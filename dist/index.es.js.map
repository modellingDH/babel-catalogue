{"version":3,"file":"index.es.js","sources":["../node_modules/react/cjs/react-jsx-runtime.production.js","../node_modules/react/cjs/react-jsx-runtime.development.js","../node_modules/react/jsx-runtime.js","../node_modules/zustand/esm/vanilla.mjs","../node_modules/zustand/esm/react.mjs","../stores/bookStore.ts","../components/Book/BookContext.tsx","../components/Book/Page.tsx","../hooks/useCoverTexture.ts","../components/Book/Cover.tsx","../components/Book/Spine.tsx","../components/Book/Particles.tsx","../components/Book/Book.tsx","../components/Book/Scene.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\");\nfunction jsxProd(type, config, maybeKey) {\n  var key = null;\n  void 0 !== maybeKey && (key = \"\" + maybeKey);\n  void 0 !== config.key && (key = \"\" + config.key);\n  if (\"key\" in config) {\n    maybeKey = {};\n    for (var propName in config)\n      \"key\" !== propName && (maybeKey[propName] = config[propName]);\n  } else maybeKey = config;\n  config = maybeKey.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== config ? config : null,\n    props: maybeKey\n  };\n}\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsxProd;\nexports.jsxs = jsxProd;\n","/**\n * @license React\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function getComponentNameFromType(type) {\n      if (null == type) return null;\n      if (\"function\" === typeof type)\n        return type.$$typeof === REACT_CLIENT_REFERENCE\n          ? null\n          : type.displayName || type.name || null;\n      if (\"string\" === typeof type) return type;\n      switch (type) {\n        case REACT_FRAGMENT_TYPE:\n          return \"Fragment\";\n        case REACT_PROFILER_TYPE:\n          return \"Profiler\";\n        case REACT_STRICT_MODE_TYPE:\n          return \"StrictMode\";\n        case REACT_SUSPENSE_TYPE:\n          return \"Suspense\";\n        case REACT_SUSPENSE_LIST_TYPE:\n          return \"SuspenseList\";\n        case REACT_ACTIVITY_TYPE:\n          return \"Activity\";\n      }\n      if (\"object\" === typeof type)\n        switch (\n          (\"number\" === typeof type.tag &&\n            console.error(\n              \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n            ),\n          type.$$typeof)\n        ) {\n          case REACT_PORTAL_TYPE:\n            return \"Portal\";\n          case REACT_CONTEXT_TYPE:\n            return type.displayName || \"Context\";\n          case REACT_CONSUMER_TYPE:\n            return (type._context.displayName || \"Context\") + \".Consumer\";\n          case REACT_FORWARD_REF_TYPE:\n            var innerType = type.render;\n            type = type.displayName;\n            type ||\n              ((type = innerType.displayName || innerType.name || \"\"),\n              (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n            return type;\n          case REACT_MEMO_TYPE:\n            return (\n              (innerType = type.displayName || null),\n              null !== innerType\n                ? innerType\n                : getComponentNameFromType(type.type) || \"Memo\"\n            );\n          case REACT_LAZY_TYPE:\n            innerType = type._payload;\n            type = type._init;\n            try {\n              return getComponentNameFromType(type(innerType));\n            } catch (x) {}\n        }\n      return null;\n    }\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function checkKeyStringCoercion(value) {\n      try {\n        testStringCoercion(value);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      if (JSCompiler_inline_result) {\n        JSCompiler_inline_result = console;\n        var JSCompiler_temp_const = JSCompiler_inline_result.error;\n        var JSCompiler_inline_result$jscomp$0 =\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            value[Symbol.toStringTag]) ||\n          value.constructor.name ||\n          \"Object\";\n        JSCompiler_temp_const.call(\n          JSCompiler_inline_result,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          JSCompiler_inline_result$jscomp$0\n        );\n        return testStringCoercion(value);\n      }\n    }\n    function getTaskName(type) {\n      if (type === REACT_FRAGMENT_TYPE) return \"<>\";\n      if (\n        \"object\" === typeof type &&\n        null !== type &&\n        type.$$typeof === REACT_LAZY_TYPE\n      )\n        return \"<...>\";\n      try {\n        var name = getComponentNameFromType(type);\n        return name ? \"<\" + name + \">\" : \"<...>\";\n      } catch (x) {\n        return \"<...>\";\n      }\n    }\n    function getOwner() {\n      var dispatcher = ReactSharedInternals.A;\n      return null === dispatcher ? null : dispatcher.getOwner();\n    }\n    function UnknownOwner() {\n      return Error(\"react-stack-top-frame\");\n    }\n    function hasValidKey(config) {\n      if (hasOwnProperty.call(config, \"key\")) {\n        var getter = Object.getOwnPropertyDescriptor(config, \"key\").get;\n        if (getter && getter.isReactWarning) return !1;\n      }\n      return void 0 !== config.key;\n    }\n    function defineKeyPropWarningGetter(props, displayName) {\n      function warnAboutAccessingKey() {\n        specialPropKeyWarningShown ||\n          ((specialPropKeyWarningShown = !0),\n          console.error(\n            \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n            displayName\n          ));\n      }\n      warnAboutAccessingKey.isReactWarning = !0;\n      Object.defineProperty(props, \"key\", {\n        get: warnAboutAccessingKey,\n        configurable: !0\n      });\n    }\n    function elementRefGetterWithDeprecationWarning() {\n      var componentName = getComponentNameFromType(this.type);\n      didWarnAboutElementRef[componentName] ||\n        ((didWarnAboutElementRef[componentName] = !0),\n        console.error(\n          \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n        ));\n      componentName = this.props.ref;\n      return void 0 !== componentName ? componentName : null;\n    }\n    function ReactElement(type, key, props, owner, debugStack, debugTask) {\n      var refProp = props.ref;\n      type = {\n        $$typeof: REACT_ELEMENT_TYPE,\n        type: type,\n        key: key,\n        props: props,\n        _owner: owner\n      };\n      null !== (void 0 !== refProp ? refProp : null)\n        ? Object.defineProperty(type, \"ref\", {\n            enumerable: !1,\n            get: elementRefGetterWithDeprecationWarning\n          })\n        : Object.defineProperty(type, \"ref\", { enumerable: !1, value: null });\n      type._store = {};\n      Object.defineProperty(type._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      });\n      Object.defineProperty(type, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      });\n      Object.defineProperty(type, \"_debugStack\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugStack\n      });\n      Object.defineProperty(type, \"_debugTask\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugTask\n      });\n      Object.freeze && (Object.freeze(type.props), Object.freeze(type));\n      return type;\n    }\n    function jsxDEVImpl(\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      debugStack,\n      debugTask\n    ) {\n      var children = config.children;\n      if (void 0 !== children)\n        if (isStaticChildren)\n          if (isArrayImpl(children)) {\n            for (\n              isStaticChildren = 0;\n              isStaticChildren < children.length;\n              isStaticChildren++\n            )\n              validateChildKeys(children[isStaticChildren]);\n            Object.freeze && Object.freeze(children);\n          } else\n            console.error(\n              \"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\"\n            );\n        else validateChildKeys(children);\n      if (hasOwnProperty.call(config, \"key\")) {\n        children = getComponentNameFromType(type);\n        var keys = Object.keys(config).filter(function (k) {\n          return \"key\" !== k;\n        });\n        isStaticChildren =\n          0 < keys.length\n            ? \"{key: someKey, \" + keys.join(\": ..., \") + \": ...}\"\n            : \"{key: someKey}\";\n        didWarnAboutKeySpread[children + isStaticChildren] ||\n          ((keys =\n            0 < keys.length ? \"{\" + keys.join(\": ..., \") + \": ...}\" : \"{}\"),\n          console.error(\n            'A props object containing a \"key\" prop is being spread into JSX:\\n  let props = %s;\\n  <%s {...props} />\\nReact keys must be passed directly to JSX without using spread:\\n  let props = %s;\\n  <%s key={someKey} {...props} />',\n            isStaticChildren,\n            children,\n            keys,\n            children\n          ),\n          (didWarnAboutKeySpread[children + isStaticChildren] = !0));\n      }\n      children = null;\n      void 0 !== maybeKey &&\n        (checkKeyStringCoercion(maybeKey), (children = \"\" + maybeKey));\n      hasValidKey(config) &&\n        (checkKeyStringCoercion(config.key), (children = \"\" + config.key));\n      if (\"key\" in config) {\n        maybeKey = {};\n        for (var propName in config)\n          \"key\" !== propName && (maybeKey[propName] = config[propName]);\n      } else maybeKey = config;\n      children &&\n        defineKeyPropWarningGetter(\n          maybeKey,\n          \"function\" === typeof type\n            ? type.displayName || type.name || \"Unknown\"\n            : type\n        );\n      return ReactElement(\n        type,\n        children,\n        maybeKey,\n        getOwner(),\n        debugStack,\n        debugTask\n      );\n    }\n    function validateChildKeys(node) {\n      isValidElement(node)\n        ? node._store && (node._store.validated = 1)\n        : \"object\" === typeof node &&\n          null !== node &&\n          node.$$typeof === REACT_LAZY_TYPE &&\n          (\"fulfilled\" === node._payload.status\n            ? isValidElement(node._payload.value) &&\n              node._payload.value._store &&\n              (node._payload.value._store.validated = 1)\n            : node._store && (node._store.validated = 1));\n    }\n    function isValidElement(object) {\n      return (\n        \"object\" === typeof object &&\n        null !== object &&\n        object.$$typeof === REACT_ELEMENT_TYPE\n      );\n    }\n    var React = require(\"react\"),\n      REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n      REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n      REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n      REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n      REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n      REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n      REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n      REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n      REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n      REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n      REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\"),\n      REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\"),\n      ReactSharedInternals =\n        React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n      hasOwnProperty = Object.prototype.hasOwnProperty,\n      isArrayImpl = Array.isArray,\n      createTask = console.createTask\n        ? console.createTask\n        : function () {\n            return null;\n          };\n    React = {\n      react_stack_bottom_frame: function (callStackForError) {\n        return callStackForError();\n      }\n    };\n    var specialPropKeyWarningShown;\n    var didWarnAboutElementRef = {};\n    var unknownOwnerDebugStack = React.react_stack_bottom_frame.bind(\n      React,\n      UnknownOwner\n    )();\n    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));\n    var didWarnAboutKeySpread = {};\n    exports.Fragment = REACT_FRAGMENT_TYPE;\n    exports.jsx = function (type, config, maybeKey) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        !1,\n        trackActualOwner\n          ? Error(\"react-stack-top-frame\")\n          : unknownOwnerDebugStack,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n    exports.jsxs = function (type, config, maybeKey) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        !0,\n        trackActualOwner\n          ? Error(\"react-stack-top-frame\")\n          : unknownOwnerDebugStack,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n  })();\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const api = { setState, getState, getInitialState, subscribe };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = ((createState) => createState ? createStoreImpl(createState) : createStoreImpl);\n\nexport { createStore };\n","import React from 'react';\nimport { createStore } from 'zustand/vanilla';\n\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity) {\n  const slice = React.useSyncExternalStore(\n    api.subscribe,\n    React.useCallback(() => selector(api.getState()), [api, selector]),\n    React.useCallback(() => selector(api.getInitialState()), [api, selector])\n  );\n  React.useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  const api = createStore(createState);\n  const useBoundStore = (selector) => useStore(api, selector);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = ((createState) => createState ? createImpl(createState) : createImpl);\n\nexport { create, useStore };\n","/**\n * Zustand store for book state management\n */\nimport { create } from 'zustand';\nimport { BookConfig, BookDimensions } from '../types/book';\n\n// Animation helper - simple easing for smooth transitions\nconst animateValue = (\n  from: number,\n  to: number,\n  duration: number,\n  setter: (value: number) => void,\n  easing: (t: number) => number = (t) => t // Linear by default\n) => {\n  const startTime = performance.now();\n\n  const animate = (currentTime: number) => {\n    const elapsed = currentTime - startTime;\n    const progress = Math.min(elapsed / duration, 1);\n    const easedProgress = easing(progress);\n    const value = from + (to - from) * easedProgress;\n\n    setter(value);\n\n    if (progress < 1) {\n      requestAnimationFrame(animate);\n    }\n  };\n\n  requestAnimationFrame(animate);\n};\n\n// Easing functions\nconst easeInOutCubic = (t: number) => {\n  return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;\n};\n\nconst easeOutElastic = (t: number) => {\n  const c4 = (2 * Math.PI) / 3;\n  return t === 0 ? 0 : t === 1 ? 1 : Math.pow(2, -10 * t) * Math.sin((t * 10 - 0.75) * c4) + 1;\n};\n\ninterface BookState extends BookConfig {\n  // Direct state setters\n  setPageCount: (count: number) => void;\n  setCurrentPage: (page: number) => void;\n  flipPage: (direction: 'forward' | 'backward') => void;\n  toggleContinuousFlip: (direction: 'forward' | 'backward') => void;\n  setDimensions: (dimensions: Partial<BookDimensions>) => void;\n  setSpineRotation: (rotation: number) => void;\n  setTilt: (tilt: number) => void;\n  setScale: (scale: number) => void;\n  setPosition: (position: [number, number, number]) => void;\n  setFrontHinge: (hinge: number) => void;\n  setBackHinge: (hinge: number) => void;\n  setBothHinges: (hinge: number) => void;\n  setPageOpacity: (opacity: number) => void;\n  setPageColor: (color: string) => void;\n  setGlowIntensity: (intensity: number) => void;\n  setCoverColor: (color: string) => void;\n  setCoverOpacity: (opacity: number) => void;\n  setFrontCoverText: (text: string) => void;\n  setBackCoverText: (text: string) => void;\n  setCoverTextColor: (color: string) => void;\n  setFontFamily: (font: string) => void;\n  setParticlesEnabled: (enabled: boolean) => void;\n  setParticleIntensity: (intensity: number) => void;\n  setConfidenceScore: (score: number) => void;\n  setDebug: (debug: boolean) => void;\n  setTestPageFlipAngle: (angle: number) => void;\n  reset: () => void;\n\n  // Animated actions\n  openBook: (duration?: number) => void;\n  closeBook: (duration?: number) => void;\n  flipPages: (count: number, direction: 'forward' | 'backward', duration?: number) => void;\n  triggerEmotion: (emotion: 'focus' | 'drift' | 'paradox') => void;\n  morphMaterial: (material: 'leather' | 'metal' | 'glass') => void;\n}\n\nconst initialState: BookConfig = {\n  // Core settings\n  pageCount: 30, // More pages for better visual\n  currentPage: 15, // Open in the middle\n  dimensions: {\n    height: 4,\n    width: 3,\n    depth: 0.6, // Will be calculated from pageCount\n  },\n\n  // Transformations\n  spineRotation: 0.5,\n  tilt: 0.2,\n  scale: 1,\n  position: [0, 0, 0] as [number, number, number],\n\n  // Cover hinges\n  frontHinge: 0,\n  backHinge: 0,\n\n  // Appearance\n  pageOpacity: 0.15,\n  pageColor: '#00ffcc',\n  glowIntensity: 0,\n  coverColor: '#2b1e16',\n  coverOpacity: 1,\n  spineColor: '#1a0f0a',\n\n  // Cover text\n  frontCoverText: '',\n  backCoverText: '',\n  coverTextColor: '#c9a876',\n  coverOutlineColor: '#c9a876',\n  coverOutlineWidth: 3,\n  fontFamily: 'Roboto',\n\n  // Features\n  particlesEnabled: true,\n  particleIntensity: 0.5,\n  confidenceScore: 0,\n\n  // Debug\n  debug: false,\n  testPageFlipAngle: 0, // 0 = back cover, 180 = front cover\n\n  // Page flip animation\n  flippingPageIndex: null,\n  flipProgress: 0,\n  flipDirection: null,\n  isFlippingContinuously: false,\n  continuousDirection: null,\n};\n\n// ... types remain the same, just exporting the creator function now\nexport type BookStore = ReturnType<typeof createBookStore>;\n\nexport const createBookStore = (initProps?: Partial<BookConfig>) => {\n  const DEFAULT_PROPS: BookConfig = { ...initialState, ...initProps };\n\n  return create<BookState>((set, get) => ({\n    ...DEFAULT_PROPS,\n\n    // Actions\n    setPageCount: (count) => {\n      const validCount = Math.max(10, Math.min(100, count)); // 10-100 pages (density)\n      const currentPage = Math.floor(validCount / 2); // Keep in middle\n\n      // Spine depth is FIXED (0.6) - pages are density within that space\n      // More pages = denser packing, not thicker spine\n      const spineDepth = 0.6;\n\n      set({\n        pageCount: validCount,\n        currentPage: currentPage,\n        dimensions: {\n          ...get().dimensions,\n          depth: spineDepth\n        }\n      });\n    },\n\n    setCurrentPage: (page) => {\n      const { pageCount } = get();\n      // Keep within bounds, but allow wrapping\n      const validPage = ((page % pageCount) + pageCount) % pageCount;\n      set({ currentPage: validPage });\n    },\n\n    flipPage: (direction) => {\n      const state = get();\n      const { currentPage, pageCount, flippingPageIndex, isFlippingContinuously } = state;\n\n      // Don't start new flip if one is in progress\n      if (flippingPageIndex !== null) {\n        console.log('âš ï¸ Flip already in progress');\n        return;\n      }\n\n      if (direction === 'forward') {\n        // Flip forward (increase current page)\n        const newPage = Math.min(currentPage + 1, pageCount - 1);\n        if (newPage === currentPage) {\n          console.log('âš ï¸ Already at last page');\n          return;\n        }\n\n        console.log('ðŸ“„ Start flip forward:', currentPage, 'â†’', newPage);\n\n        // Start animation - DON'T update currentPage yet\n        set({ flippingPageIndex: currentPage, flipProgress: 0, flipDirection: 'forward' });\n\n        // Animate flip progress\n        const duration = 500; // ms\n        const startTime = performance.now();\n\n        const animate = (currentTime: number) => {\n          const elapsed = currentTime - startTime;\n          const progress = Math.min(elapsed / duration, 1);\n\n          set({ flipProgress: progress });\n          console.log(`  Progress: ${(progress * 100).toFixed(1)}%`);\n\n          if (progress < 1) {\n            requestAnimationFrame(animate);\n          } else {\n            // Animation complete - reset without updating currentPage\n            set({ flippingPageIndex: null, flipProgress: 0, flipDirection: null });\n            console.log('âœ… Flip animation complete (currentPage unchanged)');\n\n            // If continuous flip is on, start next flip\n            if (get().isFlippingContinuously && get().continuousDirection === 'forward') {\n              setTimeout(() => {\n                if (get().isFlippingContinuously && get().continuousDirection === 'forward') {\n                  get().flipPage('forward');\n                }\n              }, 100);\n            }\n          }\n        };\n\n        requestAnimationFrame(animate);\n\n      } else {\n        // Flip backward (decrease current page)\n        const newPage = Math.max(currentPage - 1, 0);\n        if (newPage === currentPage) {\n          console.log('âš ï¸ Already at first page');\n          return;\n        }\n\n        console.log('ðŸ“„ Start flip BACKWARD:', currentPage, 'â†’', newPage);\n        console.log('   Flipping page', currentPage, 'from FRONT to BACK');\n\n        // For backward, flip the first page from the FRONT stack\n        // This is the page at index currentPage\n        set({ flippingPageIndex: currentPage, flipProgress: 0, flipDirection: 'backward' });\n\n        // Animate flip progress (in reverse - front to back)\n        const duration = 500; // ms\n        const startTime = performance.now();\n\n        const animate = (currentTime: number) => {\n          const elapsed = currentTime - startTime;\n          const progress = Math.min(elapsed / duration, 1);\n\n          set({ flipProgress: progress });\n          console.log(`  Progress: ${(progress * 100).toFixed(1)}% (BACKWARD)`);\n\n          if (progress < 1) {\n            requestAnimationFrame(animate);\n          } else {\n            // Animation complete - reset without updating currentPage\n            set({ flippingPageIndex: null, flipProgress: 0, flipDirection: null });\n            console.log('âœ… Flip animation complete (currentPage unchanged)');\n\n            // If continuous flip is on, start next flip\n            if (get().isFlippingContinuously && get().continuousDirection === 'backward') {\n              setTimeout(() => {\n                if (get().isFlippingContinuously && get().continuousDirection === 'backward') {\n                  get().flipPage('backward');\n                }\n              }, 100);\n            }\n          }\n        };\n\n        requestAnimationFrame(animate);\n      }\n    },\n\n    toggleContinuousFlip: (direction) => {\n      const state = get();\n      const { isFlippingContinuously, continuousDirection } = state;\n\n      if (isFlippingContinuously && continuousDirection === direction) {\n        // Toggle off\n        console.log('â¸ï¸ Stop continuous flip');\n        set({ isFlippingContinuously: false, continuousDirection: null });\n      } else {\n        // Toggle on (and turn off opposite direction)\n        console.log('â–¶ï¸ Start continuous flip', direction);\n        set({ isFlippingContinuously: true, continuousDirection: direction });\n\n        // Start the first flip\n        get().flipPage(direction);\n      }\n    },\n\n    setDimensions: (dims) => {\n      const current = get().dimensions;\n      const newDimensions = { ...current, ...dims };\n\n      // If depth is manually changed, update page count to match\n      if (dims.depth !== undefined && dims.depth !== current.depth) {\n        const estimatedPageCount = Math.round(dims.depth / 0.002);\n        const validCount = Math.max(10, Math.min(100, estimatedPageCount));\n        set({\n          dimensions: newDimensions,\n          pageCount: validCount,\n          currentPage: Math.floor(validCount / 2)\n        });\n      } else {\n        set({ dimensions: newDimensions });\n      }\n    },\n\n    setSpineRotation: (rotation) => set({ spineRotation: rotation }),\n    setTilt: (tilt) => set({ tilt: tilt }),\n    setScale: (scale) => set({ scale: scale }),\n    setPosition: (position) => set({ position: position }),\n    setFrontHinge: (hinge) => set({ frontHinge: hinge }),\n    setBackHinge: (hinge) => set({ backHinge: hinge }),\n    setBothHinges: (hinge) => set({ frontHinge: hinge, backHinge: hinge }),\n    setPageOpacity: (opacity) => set({ pageOpacity: opacity }),\n    setPageColor: (color) => set({ pageColor: color }),\n    setGlowIntensity: (intensity) => set({ glowIntensity: intensity }),\n    setCoverColor: (color) => set({ coverColor: color }),\n    setCoverOpacity: (opacity) => set({ coverOpacity: opacity }),\n    setSpineColor: (color) => set({ spineColor: color }),\n    setFrontCoverText: (text) => set({ frontCoverText: text }),\n    setBackCoverText: (text) => set({ backCoverText: text }),\n    setCoverTextColor: (color) => set({ coverTextColor: color }),\n    setCoverOutlineColor: (color) => set({ coverOutlineColor: color }),\n    setCoverOutlineWidth: (width) => set({ coverOutlineWidth: width }),\n    setFontFamily: (font) => set({ fontFamily: font }),\n    setParticlesEnabled: (enabled) => set({ particlesEnabled: enabled }),\n    setParticleIntensity: (intensity) => set({ particleIntensity: intensity }),\n    setConfidenceScore: (score) => set({ confidenceScore: score }),\n    setDebug: (debug) => set({ debug: debug }),\n    setTestPageFlipAngle: (angle) => {\n      set({ testPageFlipAngle: angle });\n      console.log('ðŸ“„ Test page flip angle:', angle.toFixed(1), 'Â°');\n    },\n    reset: () => set(initialState),\n\n    // ========== ANIMATED ACTIONS ==========\n\n    /**\n     * Open book - smoothly animate both covers to open position\n     */\n    openBook: (duration = 1000) => {\n      const current = get();\n      const targetAngle = Math.PI * 0.4; // ~72 degrees (realistic book open angle)\n\n      animateValue(\n        current.frontHinge,\n        targetAngle,\n        duration,\n        (value) => set({ frontHinge: value }),\n        easeInOutCubic\n      );\n\n      animateValue(\n        current.backHinge,\n        targetAngle,\n        duration,\n        (value) => set({ backHinge: value }),\n        easeInOutCubic\n      );\n\n      // Increase particle intensity when opening\n      animateValue(\n        current.particleIntensity,\n        0.7,\n        duration,\n        (value) => set({ particleIntensity: value }),\n        easeInOutCubic\n      );\n    },\n\n    /**\n     * Close book - smoothly animate both covers to closed position\n     */\n    closeBook: (duration = 1000) => {\n      const current = get();\n\n      animateValue(\n        current.frontHinge,\n        0,\n        duration,\n        (value) => set({ frontHinge: value }),\n        easeInOutCubic\n      );\n\n      animateValue(\n        current.backHinge,\n        0,\n        duration,\n        (value) => set({ backHinge: value }),\n        easeInOutCubic\n      );\n\n      // Decrease particle intensity when closing\n      animateValue(\n        current.particleIntensity,\n        0,\n        duration,\n        (value) => set({ particleIntensity: value }),\n        easeInOutCubic\n      );\n\n      // Reset glow\n      animateValue(\n        current.glowIntensity,\n        0,\n        duration,\n        (value) => set({ glowIntensity: value }),\n        easeInOutCubic\n      );\n    },\n\n    /**\n     * Flip multiple pages with animation (visual flip for each)\n     */\n    flipPages: (count, direction, duration = 200) => {\n      const state = get();\n      const { flippingPageIndex } = state;\n\n      // Don't start if already flipping\n      if (flippingPageIndex !== null) {\n        console.log('âš ï¸ Flip already in progress');\n        return;\n      }\n\n      let flipped = 0;\n\n      const flipNext = () => {\n        if (flipped >= count) {\n          console.log('âœ… Finished flipping', count, 'pages', direction);\n          return;\n        }\n\n        // Get fresh state\n        const state = get();\n        const { currentPage, pageCount } = state;\n\n        let newPage: number;\n\n        if (direction === 'forward') {\n          newPage = Math.min(currentPage + 1, pageCount - 1);\n        } else {\n          newPage = Math.max(currentPage - 1, 0);\n        }\n\n        if (newPage === currentPage) {\n          console.log('âš ï¸ Reached boundary at page', currentPage);\n          return;\n        }\n\n        console.log(`ðŸ“„ Flip ${flipped + 1}/${count}: page ${currentPage} â†’ ${newPage}`);\n\n        // Start visual flip animation for this page\n        const pageToFlip = direction === 'forward' ? currentPage : currentPage;\n        set({ flippingPageIndex: pageToFlip, flipProgress: 0 });\n\n        // Animate this page flip\n        const flipDuration = 500; // Each page flips in 500ms\n        const startTime = performance.now();\n\n        const animate = (currentTime: number) => {\n          const elapsed = currentTime - startTime;\n          const progress = Math.min(elapsed / flipDuration, 1);\n\n          set({ flipProgress: progress });\n\n          if (progress < 1) {\n            requestAnimationFrame(animate);\n          } else {\n            // This page flip complete - reset without updating currentPage\n            set({ flippingPageIndex: null, flipProgress: 0, flipDirection: null });\n            flipped++;\n\n            // Start next flip after a brief pause\n            if (flipped < count) {\n              setTimeout(flipNext, 50); // 50ms pause between flips\n            } else {\n              console.log('âœ… All', count, 'page animations complete (currentPage unchanged)');\n            }\n          }\n        };\n\n        requestAnimationFrame(animate);\n      };\n\n      console.log('â–¶ï¸ Starting', count, 'page flips', direction, 'from page', get().currentPage);\n      flipNext();\n    },\n\n    /**\n     * Trigger emotional states (from README concept)\n     */\n    triggerEmotion: (emotion) => {\n      const current = get();\n\n      switch (emotion) {\n        case 'focus':\n          // Bright pulsing of pages (high confidence, active thinking)\n          // Slow, bright pulses (same frequency as drift)\n          let pulseCycles = 0;\n          const maxPulses = 5;\n          const pulseDuration = 1200; // Same slow duration as drift\n\n          const pulse = () => {\n            if (pulseCycles >= maxPulses) {\n              // End with bright glow\n              animateValue(get().glowIntensity, 1.2, pulseDuration / 2, (v) => set({ glowIntensity: v }), easeInOutCubic);\n              return;\n            }\n\n            // Up to bright\n            animateValue(get().glowIntensity, 1.8, pulseDuration / 2, (v) => set({ glowIntensity: v }), easeInOutCubic);\n\n            setTimeout(() => {\n              // Down\n              animateValue(get().glowIntensity, 0.8, pulseDuration / 2, (v) => set({ glowIntensity: v }), easeInOutCubic);\n              pulseCycles++;\n              setTimeout(pulse, pulseDuration / 2);\n            }, pulseDuration / 2);\n          };\n\n          pulse();\n\n          // Increase particle flow\n          animateValue(current.particleIntensity, 1.0, 800, (v) => set({ particleIntensity: v }), easeInOutCubic);\n          break;\n\n        case 'drift':\n          // Dimming pulsing of pages (daydreaming, low activity)\n          // Slow, dim pulses (same frequency as focus)\n          let dimPulseCycles = 0;\n          const maxDimPulses = 5;\n          const dimPulseDuration = 1200; // Same slow duration as focus\n\n          const dimPulse = () => {\n            if (dimPulseCycles >= maxDimPulses) {\n              // End very dim\n              animateValue(get().glowIntensity, 0.1, dimPulseDuration / 2, (v) => set({ glowIntensity: v }), easeInOutCubic);\n              return;\n            }\n\n            // Slightly up\n            animateValue(get().glowIntensity, 0.4, dimPulseDuration / 2, (v) => set({ glowIntensity: v }), easeInOutCubic);\n\n            setTimeout(() => {\n              // Down to dim\n              animateValue(get().glowIntensity, 0.1, dimPulseDuration / 2, (v) => set({ glowIntensity: v }), easeInOutCubic);\n              dimPulseCycles++;\n              setTimeout(dimPulse, dimPulseDuration / 2);\n            }, dimPulseDuration / 2);\n          };\n\n          dimPulse();\n\n          // Decrease particles\n          animateValue(current.particleIntensity, 0.1, 1200, (v) => set({ particleIntensity: v }), easeInOutCubic);\n          break;\n\n        case 'paradox':\n          // Violent tremor effect - rapid position shake\n          const originalRotation = current.spineRotation;\n          const originalTilt = current.tilt;\n          const shakeIntensity = 0.15;\n          const shakeCount = 10;\n          const shakeDuration = 50;\n\n          let shakes = 0;\n          const shake = () => {\n            if (shakes >= shakeCount) {\n              // Return to original position\n              set({ spineRotation: originalRotation, tilt: originalTilt });\n              return;\n            }\n\n            const randomRotation = originalRotation + (Math.random() - 0.5) * shakeIntensity;\n            const randomTilt = originalTilt + (Math.random() - 0.5) * shakeIntensity;\n            set({ spineRotation: randomRotation, tilt: randomTilt });\n\n            shakes++;\n            setTimeout(shake, shakeDuration);\n          };\n\n          shake();\n\n          // Flash glow\n          animateValue(current.glowIntensity, 2.0, 200, (v) => set({ glowIntensity: v }));\n          setTimeout(() => {\n            animateValue(2.0, 0.3, 300, (v) => set({ glowIntensity: v }));\n          }, 200);\n          break;\n      }\n    },\n\n    /**\n     * Morph cover material appearance (from README concept)\n     */\n    morphMaterial: (material) => {\n      const current = get();\n\n      switch (material) {\n        case 'leather':\n          // Dark, matte, organic - humanities/lore\n          set({ coverColor: '#2b1e16', coverOpacity: 1.0 });\n          animateValue(current.glowIntensity, 0.1, 500, (v) => set({ glowIntensity: v }), easeInOutCubic);\n          break;\n\n        case 'metal':\n          // Reflective, cold, hard - scientific/logical\n          set({ coverColor: '#556b7d', coverOpacity: 1.0 });\n          animateValue(current.glowIntensity, 0.8, 500, (v) => set({ glowIntensity: v }), easeInOutCubic);\n          animateValue(current.particleIntensity, 0.9, 500, (v) => set({ particleIntensity: v }), easeInOutCubic);\n          break;\n\n        case 'glass':\n          // Transparent, vulnerable - ultimate truth\n          set({ coverColor: '#d0e8f2', coverOpacity: 0.3 });\n          animateValue(current.glowIntensity, 1.8, 500, (v) => set({ glowIntensity: v }), easeInOutCubic);\n          animateValue(current.particleIntensity, 1.0, 500, (v) => set({ particleIntensity: v }), easeInOutCubic);\n          break;\n      }\n    },\n  }));\n};\n","/**\n * Context Provider for Book Store\n * Should be wrapped around the Book component to provide isolated state\n */\nimport { createContext, useContext, useRef } from 'react';\nimport { useStore } from 'zustand';\nimport { createBookStore, BookStore } from '../../stores/bookStore';\nimport { BookConfig } from '../../types/book';\n\n// Create Context\nconst BookContext = createContext<BookStore | null>(null);\n\ninterface BookProviderProps extends Partial<BookConfig> {\n    children: React.ReactNode;\n}\n\n/**\n * Provider component that initializes a new store instance\n */\nexport function BookProvider({ children, ...props }: BookProviderProps) {\n    const storeRef = useRef<BookStore>();\n\n    // Initialize store once\n    if (!storeRef.current) {\n        storeRef.current = createBookStore(props);\n    }\n\n    return (\n        <BookContext.Provider value={storeRef.current}>\n            {children}\n        </BookContext.Provider>\n    );\n}\n\n/**\n * Hook to consume the book store from context\n * Throws error if used outside of provider\n */\nexport function useBookStore<T>(selector: (state: any) => T): T {\n    const store = useContext(BookContext);\n\n    if (!store) {\n        throw new Error('useBookStore must be used within a BookProvider');\n    }\n\n    return useStore(store, selector);\n}\n\n// Re-export specific store actions/selectors hook for convenience if needed\n// or users can just use useBookStore(state => state.something)\n","/**\n * Individual Page Component\n * Pages positioned INSIDE the book between covers\n */\nimport * as THREE from 'three';\nimport { PageProps } from '../../types/book';\n\nexport function Page({ \n  index,\n  totalPages,\n  currentPage,\n  opacity = 0.15, \n  color = '#00ffcc',\n  glow = 0,\n  coverWidth,\n  coverHeight\n}: PageProps) {\n  // Page dimensions - slightly smaller than covers to fit inside\n  const pageWidth = coverWidth * 0.93;\n  const pageHeight = coverHeight * 0.95;\n  \n  // Spine parameters\n  const spineWidth = 0.1;\n  const spineDepth = 0.6;\n  \n  // Determine which cover this page is attached to\n  const isAttachedToBack = index < currentPage;\n  \n  // Spread pages across the spine depth\n  // Parent group is at inside face of cover (offset by coverThickness/2)\n  // Pages spread from inside face (z=0) toward the center of the book\n  \n  const coverThickness = 0.05;\n  // Available depth to spread pages (from inside face to center)\n  const availableDepth = spineDepth / 2 - coverThickness / 2;\n  \n  let zOffset: number;\n  \n  if (isAttachedToBack && currentPage > 0) {\n    // Back pages: spread from inside face (0) toward center (positive Z)\n    // Back cover is at z=-0.3, inside face at -0.275, center at 0\n    const progress = index / (currentPage - 1 || 1);\n    zOffset = progress * availableDepth; // Positive spreads toward center (0)\n  } else {\n    // Front pages: spread from inside face (0) toward center (negative Z)\n    // Front cover is at z=+0.3, inside face at +0.275, center at 0\n    const progress = (index - currentPage) / (totalPages - currentPage - 1 || 1);\n    zOffset = -progress * availableDepth; // Negative spreads toward center (0)\n  }\n  \n  return (\n    <group position={[0, 0, zOffset]}>\n      {/* Page mesh positioned so it stays inside cover bounds */}\n      <mesh position={[pageWidth / 2, 0, 0]}>\n        <planeGeometry args={[pageWidth, pageHeight]} />\n        <meshStandardMaterial\n          color={color}\n          transparent\n          opacity={opacity}\n          side={THREE.DoubleSide}\n          emissive={color}\n          emissiveIntensity={glow}\n          depthWrite={false}\n        />\n      </mesh>\n    </group>\n  );\n}\n","/**\n * Custom hook for creating cover textures from text\n */\nimport { useMemo } from 'react';\nimport * as THREE from 'three';\n\nexport function useCoverTexture(\n  text: string | undefined,\n  textColor: string = '#c9a876',\n  outlineColor: string = '#c9a876',\n  outlineWidth: number = 3,\n  isFront: boolean = true,\n  fontFamily: string = 'Roboto'\n) {\n  return useMemo(() => {\n    // SSR check\n    if (typeof document === 'undefined') return null;\n\n    if (!text) return null;\n\n    // Create canvas for texture\n    const canvas = document.createElement('canvas');\n    canvas.width = 512;\n    canvas.height = 512;\n    const ctx = canvas.getContext('2d');\n\n    if (!ctx) return null;\n\n    // Completely transparent background - only text will be visible\n    ctx.clearRect(0, 0, 512, 512);\n\n    // Setup text style\n    ctx.fillStyle = textColor;\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n\n    // Handle multi-line text\n    const lines = text.split('\\n');\n    const fontSize = Math.min(48, Math.floor(400 / lines.length));\n    ctx.font = `bold ${fontSize}px ${fontFamily}, sans-serif`;\n\n    // Draw text lines\n    const startY = 256 - ((lines.length - 1) * (fontSize + 10)) / 2;\n    lines.forEach((line, i) => {\n      const y = startY + i * (fontSize + 10);\n\n      // Word wrap for long lines\n      const words = line.split(' ');\n      const maxWidth = 450;\n      let currentLine = '';\n      let currentY = y;\n\n      words.forEach((word, wordIndex) => {\n        const testLine = currentLine + (currentLine ? ' ' : '') + word;\n        const metrics = ctx.measureText(testLine);\n\n        if (metrics.width > maxWidth && currentLine) {\n          ctx.fillText(currentLine, 256, currentY);\n          currentLine = word;\n          currentY += fontSize + 5;\n        } else {\n          currentLine = testLine;\n        }\n\n        // Last word\n        if (wordIndex === words.length - 1) {\n          ctx.fillText(currentLine, 256, currentY);\n        }\n      });\n    });\n\n    // No decorative border - just text floating\n\n    // Create texture\n    const texture = new THREE.CanvasTexture(canvas);\n    texture.needsUpdate = true;\n\n    return texture;\n  }, [text, textColor, outlineColor, outlineWidth, isFront, fontFamily]);\n}\n\n","/**\n * Cover Component\n * Hinged book cover that opens/closes from spine edge\n */\nimport * as THREE from 'three';\nimport { CoverProps } from '../../types/book';\nimport { useCoverTexture } from '../../hooks/useCoverTexture';\n\nexport function Cover({\n  side,\n  width,\n  height,\n  hinge,\n  text,\n  textColor = '#c9a876',\n  outlineColor = '#c9a876',\n  outlineWidth = 3,\n  color = '#2b1e16',\n  opacity = 1,\n  fontFamily = 'Roboto'\n}: CoverProps & { fontFamily?: string }) {\n  const texture = useCoverTexture(text, textColor, outlineColor, outlineWidth, side === 'front', fontFamily);\n\n  // Cover pivots at spine edge\n  // Spine is centered at origin with width 0.1\n  // Spine goes from -0.05 to +0.05 in X\n  // Front cover pivots at RIGHT edge of spine (x = 0.05)\n  // Position in Z based on spine depth (0.6 total, so Â±0.3)\n  const spineWidth = 0.1;\n  const spineDepth = 0.6;\n  const coverThickness = 0.05;\n\n  const pivotX = spineWidth / 2; // 0.05\n  const pivotZ = side === 'front' ? spineDepth / 2 : -spineDepth / 2; // Â±0.3\n\n  // Rotation direction: front cover uses negative (opens forward), back uses positive\n  const hingeRotation = side === 'front' ? -hinge : hinge;\n\n  return (\n    <group\n      position={[pivotX, 0, pivotZ]}\n      rotation={[0, hingeRotation, 0]}\n    >\n      {/* Cover box - plain color only */}\n      <mesh\n        position={[width / 2, 0, 0]}\n        castShadow\n        receiveShadow\n      >\n        <boxGeometry args={[width, height, coverThickness]} />\n        <meshStandardMaterial\n          color={color}\n          transparent={opacity < 1}\n          opacity={opacity}\n          side={THREE.DoubleSide}\n        />\n      </mesh>\n\n      {/* Floating text centered on cover, offset outward from pages */}\n      {texture && (\n        <mesh\n          position={[\n            width / 2,\n            0,\n            side === 'front'\n              ? coverThickness / 2 + 0.01   // Front: offset in +Z (away from pages)\n              : -(coverThickness / 2 + 0.01) // Back: offset in -Z (away from pages)\n          ]}\n          rotation={[\n            0,\n            side === 'back' ? Math.PI : 0, // Back cover: flip 180Â° around Y axis\n            0\n          ]}\n        >\n          <planeGeometry args={[width * 0.9, height * 0.9]} />\n          <meshStandardMaterial\n            map={texture}\n            transparent={true}\n            opacity={1.0} // Text always fully opaque, independent of cover opacity\n            side={THREE.DoubleSide} // Visible from both sides\n            depthWrite={false}\n            alphaTest={0.1} // Only render non-transparent parts\n          />\n        </mesh>\n      )}\n    </group>\n  );\n}\n\n","/**\n * Spine Component\n * The central axis of the book - fixed depth, pages are density\n */\nimport { SpineProps } from '../../types/book';\n\nexport function Spine({ \n  width = 0.1, \n  height = 4, \n  depth = 0.6,\n  color = '#666666',\n  pageCount = 30\n}: SpineProps) {\n  // Spine depth is FIXED - doesn't change with page count\n  // Page count represents DENSITY (how tightly packed pages are)\n  \n  return (\n    <mesh position={[0, 0, 0]}>\n      <boxGeometry args={[width, height, depth]} />\n      <meshStandardMaterial color={color} />\n    </mesh>\n  );\n}\n","/**\n * Particle System Component\n * Animated particles flowing around the book\n */\nimport { useRef, useMemo } from 'react';\nimport { useFrame } from '@react-three/fiber';\nimport * as THREE from 'three';\nimport { ParticleProps } from '../../types/book';\n\nexport function Particles({ \n  count = 200, \n  intensity, \n  enabled,\n  bookDimensions \n}: ParticleProps) {\n  const pointsRef = useRef<THREE.Points>(null);\n  \n  // Create particle geometry and velocities\n  const { positions, velocities } = useMemo(() => {\n    const positions = new Float32Array(count * 3);\n    const velocities = new Float32Array(count * 3);\n    \n    const { height, width, depth } = bookDimensions;\n    \n    // Initialize particles emanating from page area toward the front\n    for (let i = 0; i < count; i++) {\n      const i3 = i * 3;\n      \n      // Start particles from page area (near spine, within book depth)\n      positions[i3] = (Math.random() - 0.5) * width * 0.5; // Near center (spine area)\n      positions[i3 + 1] = (Math.random() - 0.5) * height; // Full height\n      positions[i3 + 2] = (Math.random() - 0.5) * depth; // Within spine depth\n      \n      // Velocities: flow forward (positive X), slightly upward and outward\n      velocities[i3] = 0.01 + Math.random() * 0.02; // Forward (toward front of book)\n      velocities[i3 + 1] = Math.random() * 0.01; // Slightly upward\n      velocities[i3 + 2] = (Math.random() - 0.5) * 0.005; // Slight Z spread\n    }\n    \n    return { positions, velocities };\n  }, [count, bookDimensions]);\n  \n  // Animate particles\n  useFrame((state, delta) => {\n    if (!pointsRef.current || !enabled) return;\n    \n    const geometry = pointsRef.current.geometry;\n    const positionAttr = geometry.attributes.position;\n    const { height, width, depth } = bookDimensions;\n    \n    for (let i = 0; i < count; i++) {\n      const i3 = i * 3;\n      \n      // Update positions - particles flow forward\n      positionAttr.array[i3] += velocities[i3] * intensity; // Speed affected by intensity\n      positionAttr.array[i3 + 1] += velocities[i3 + 1] * intensity;\n      positionAttr.array[i3 + 2] += velocities[i3 + 2] * intensity;\n      \n      // Respawn at page source when particle moves too far forward\n      if (positionAttr.array[i3] > width * 2) {\n        // Respawn at page area\n        positionAttr.array[i3] = (Math.random() - 0.5) * width * 0.5; // Near spine\n        positionAttr.array[i3 + 1] = (Math.random() - 0.5) * height;\n        positionAttr.array[i3 + 2] = (Math.random() - 0.5) * depth;\n      }\n      \n      // Wrap Y and Z\n      if (Math.abs(positionAttr.array[i3 + 1]) > height * 1.5) {\n        positionAttr.array[i3 + 1] = (Math.random() - 0.5) * height;\n      }\n      if (Math.abs(positionAttr.array[i3 + 2]) > depth * 1.5) {\n        positionAttr.array[i3 + 2] = (Math.random() - 0.5) * depth;\n      }\n    }\n    \n    positionAttr.needsUpdate = true;\n  });\n  \n  if (!enabled) return null;\n  \n  const effectiveIntensity = Math.max(0.05, intensity);\n  \n  return (\n    <points ref={pointsRef}>\n      <bufferGeometry>\n        <bufferAttribute\n          attach=\"attributes-position\"\n          count={count}\n          array={positions}\n          itemSize={3}\n        />\n      </bufferGeometry>\n      <pointsMaterial\n        size={0.05 * effectiveIntensity}\n        color=\"#00ffcc\"\n        transparent\n        opacity={effectiveIntensity}\n        sizeAttenuation\n        blending={THREE.AdditiveBlending}\n      />\n    </points>\n  );\n}\n\n","/**\n * Main Book Component\n * Composes all book parts with proper physics\n */\nimport { useRef } from 'react';\nimport * as THREE from 'three';\nimport { Group } from 'three';\nimport { useFrame } from '@react-three/fiber';\nimport { useBookStore } from './BookContext';\nimport { Page } from './Page';\nimport { Cover } from './Cover';\nimport { Spine } from './Spine';\nimport { Particles } from './Particles';\nimport { Html } from '@react-three/drei';\n\nexport function Book() {\n  const bookGroupRef = useRef<Group>(null);\n\n  // Get state from store\n  const {\n    pageCount,\n    currentPage,\n    dimensions,\n    spineRotation,\n    tilt,\n    scale,\n    position,\n    frontHinge,\n    backHinge,\n    pageOpacity,\n    pageColor,\n    glowIntensity,\n    coverColor,\n    coverOpacity,\n    spineColor,\n    frontCoverText,\n    backCoverText,\n    coverTextColor,\n    coverOutlineColor,\n    coverOutlineWidth,\n    particlesEnabled,\n    particleIntensity,\n    debug,\n    testPageFlipAngle,\n    flippingPageIndex,\n    flipProgress,\n    flipDirection,\n    fontFamily\n  } = useBookStore(state => state);\n\n  // Spine parameters - FIXED for proper book physics\n  const spineWidth = 0.1;\n  const spineDepth = 0.6;\n  const coverThickness = 0.05;\n\n  // Apply transformations to book group\n  useFrame(() => {\n    if (bookGroupRef.current) {\n      bookGroupRef.current.rotation.y = spineRotation;\n      bookGroupRef.current.rotation.z = tilt; // Tilt controls horizontality (lean left/right)\n      bookGroupRef.current.scale.setScalar(scale);\n      const safePosition = position || [0, 0, 0];\n      bookGroupRef.current.position.set(safePosition[0], safePosition[1], safePosition[2]);\n    }\n  });\n\n  return (\n    <group ref={bookGroupRef}>\n      {/* Debug helpers */}\n      {debug && (\n        <>\n          <axesHelper args={[2]} />\n          <gridHelper args={[10, 10]} />\n          <Html position={[0, dimensions.height / 2 + 0.5, 0]}>\n            <div style={{\n              background: 'rgba(0,0,0,0.8)',\n              color: '#00ffcc',\n              padding: '10px',\n              fontFamily: 'monospace',\n              fontSize: '10px',\n              borderRadius: '4px',\n              whiteSpace: 'nowrap'\n            }}>\n              <div>Total Pages: {pageCount}</div>\n              <div>Current Page: {currentPage}</div>\n              <div>Spine: {spineWidth} Ã— {spineDepth}</div>\n              <div>Back Pages: {currentPage}</div>\n              <div>Front Pages: {pageCount - currentPage}</div>\n              <div>Cover Width: {dimensions.width.toFixed(2)}</div>\n            </div>\n          </Html>\n        </>\n      )}\n\n      {/* Spine - centered at origin */}\n      <Spine\n        width={spineWidth}\n        height={dimensions.height}\n        depth={spineDepth}\n        color={spineColor}\n        pageCount={pageCount}\n      />\n\n      {/* Covers - pivot at spine edges */}\n      <Cover\n        side=\"front\"\n        width={dimensions.width}\n        height={dimensions.height}\n        hinge={frontHinge}\n        text={frontCoverText}\n        textColor={coverTextColor}\n        outlineColor={coverOutlineColor}\n        outlineWidth={coverOutlineWidth}\n        color={coverColor}\n        opacity={coverOpacity}\n        fontFamily={fontFamily}\n      />\n      <Cover\n        side=\"back\"\n        width={dimensions.width}\n        height={dimensions.height}\n        hinge={backHinge}\n        text={backCoverText}\n        textColor={coverTextColor}\n        outlineColor={coverOutlineColor}\n        outlineWidth={coverOutlineWidth}\n        color={coverColor}\n        opacity={coverOpacity}\n        fontFamily={fontFamily}\n      />\n\n      {/* Back cover pages - attached to INSIDE face of back cover */}\n      {/* Group at back cover pivot, pages extend inward (toward front) */}\n      <group\n        position={[spineWidth / 2, 0, -spineDepth / 2]}\n        rotation={[0, backHinge, 0]}\n      >\n        {/* Pages positioned at inside face of cover (toward the front) */}\n        <group position={[0, 0, coverThickness / 2]}>\n          {Array.from({ length: currentPage }, (_, i) => {\n            // Skip the page that's currently flipping forward\n            if (i === flippingPageIndex && flipProgress > 0) return null;\n\n            return (\n              <Page\n                key={`back-${i}`}\n                index={i}\n                totalPages={pageCount}\n                currentPage={currentPage}\n                opacity={pageOpacity}\n                color={pageColor}\n                glow={glowIntensity}\n                coverWidth={dimensions.width}\n                coverHeight={dimensions.height}\n              />\n            );\n          })}\n        </group>\n      </group>\n\n      {/* Front cover pages - attached to INSIDE face of front cover */}\n      {/* Group at front cover pivot, pages extend inward (toward back) */}\n      <group\n        position={[spineWidth / 2, 0, spineDepth / 2]}\n        rotation={[0, -frontHinge, 0]}\n      >\n        {/* Pages positioned at inside face of cover (toward the back) */}\n        <group position={[0, 0, -coverThickness / 2]}>\n          {Array.from({ length: pageCount - currentPage }, (_, i) => {\n            const pageIndex = i + currentPage;\n            // Skip the page that's currently flipping (when flipping backward)\n            if (pageIndex === flippingPageIndex && flipProgress > 0) return null;\n\n            return (\n              <Page\n                key={`front-${pageIndex}`}\n                index={pageIndex}\n                totalPages={pageCount}\n                currentPage={currentPage}\n                opacity={pageOpacity}\n                color={pageColor}\n                glow={glowIntensity}\n                coverWidth={dimensions.width}\n                coverHeight={dimensions.height}\n              />\n            );\n          })}\n        </group>\n      </group>\n\n      {/* Flipping page - rendered separately with animation */}\n      {flippingPageIndex !== null && flipProgress > 0 && (() => {\n        // Forward: Flip from FRONT to BACK (180 to 0)\n        // Backward: Flip from BACK to FRONT (0 to 180)\n        const pageRotation = flipDirection === 'forward'\n          ? -frontHinge + flipProgress * (backHinge - (-frontHinge))  // 180Â° â†’ 0Â°\n          : backHinge + flipProgress * (-frontHinge - backHinge);  // 0Â° â†’ 180Â°\n\n        return (\n          <group\n            position={[spineWidth / 2, 0, 0]}\n            rotation={[0, pageRotation, 0]}\n          >\n            {/* Flipping page with normal appearance */}\n            <mesh position={[dimensions.width * 0.93 / 2, 0, 0]}>\n              <planeGeometry args={[dimensions.width * 0.93, dimensions.height * 0.95]} />\n              <meshStandardMaterial\n                color={pageColor}\n                transparent\n                opacity={pageOpacity}\n                side={THREE.DoubleSide}\n                emissive={pageColor}\n                emissiveIntensity={glowIntensity}\n                depthWrite={false}\n              />\n            </mesh>\n          </group>\n        );\n      })()}\n\n      {/* Particles */}\n      <Particles\n        count={200}\n        intensity={particleIntensity}\n        enabled={particlesEnabled}\n        bookDimensions={{\n          ...dimensions,\n          depth: spineDepth\n        }}\n      />\n\n      {/* Debug: Manual test page that flips */}\n      {testPageFlipAngle > 0 && (() => {\n        // Calculate page rotation between the two cover angles\n        // 0Â° = back cover angle (backHinge)\n        // 180Â° = front cover angle (-frontHinge)\n        const progress = testPageFlipAngle / 180; // 0 to 1\n        const pageRotation = backHinge + progress * (-frontHinge - backHinge);\n\n        return (\n          <group\n            position={[spineWidth / 2, 0, 0]}\n            rotation={[0, pageRotation, 0]}\n          >\n            {/* Page positioned so its EDGE is at pivot point (spine edge) */}\n            <mesh position={[dimensions.width / 2, 0, 0]}>\n              <planeGeometry args={[dimensions.width, dimensions.height]} />\n              <meshStandardMaterial\n                color=\"#ff0000\"\n                transparent\n                opacity={0.8}\n                side={THREE.DoubleSide}\n                emissive=\"#ff0000\"\n                emissiveIntensity={0.5}\n              />\n            </mesh>\n          </group>\n        );\n      })()}\n    </group>\n  );\n}\n","/**\n * Scene Component\n * Sets up lights, camera, and environment\n */\nimport { OrbitControls } from '@react-three/drei';\n\nexport function Scene({ children }: { children: React.ReactNode }) {\n  return (\n    <>\n      {/* Lights - matching concept.html */}\n      <ambientLight intensity={0.8} />\n      <pointLight \n        position={[5, 5, 5]} \n        intensity={1} \n        distance={50}\n        color=\"#00ffcc\"\n      />\n      \n      {/* Camera controls */}\n      <OrbitControls \n        makeDefault\n        enableDamping\n        dampingFactor={0.05}\n      />\n      \n      {/* Book content */}\n      {children}\n    </>\n  );\n}\n\n"],"names":["REACT_ELEMENT_TYPE","REACT_FRAGMENT_TYPE","jsxProd","type","config","maybeKey","key","propName","reactJsxRuntime_production","getComponentNameFromType","REACT_CLIENT_REFERENCE","REACT_PROFILER_TYPE","REACT_STRICT_MODE_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_ACTIVITY_TYPE","REACT_PORTAL_TYPE","REACT_CONTEXT_TYPE","REACT_CONSUMER_TYPE","REACT_FORWARD_REF_TYPE","innerType","REACT_MEMO_TYPE","REACT_LAZY_TYPE","testStringCoercion","value","checkKeyStringCoercion","JSCompiler_inline_result","JSCompiler_temp_const","JSCompiler_inline_result$jscomp$0","getTaskName","name","getOwner","dispatcher","ReactSharedInternals","UnknownOwner","hasValidKey","hasOwnProperty","getter","defineKeyPropWarningGetter","props","displayName","warnAboutAccessingKey","specialPropKeyWarningShown","elementRefGetterWithDeprecationWarning","componentName","didWarnAboutElementRef","ReactElement","owner","debugStack","debugTask","refProp","jsxDEVImpl","isStaticChildren","children","isArrayImpl","validateChildKeys","keys","k","didWarnAboutKeySpread","node","isValidElement","object","React","require$$0","createTask","callStackForError","unknownOwnerDebugStack","unknownOwnerDebugTask","reactJsxRuntime_development","trackActualOwner","jsxRuntimeModule","require$$1","createStoreImpl","createState","state","listeners","setState","partial","replace","nextState","previousState","listener","getState","api","initialState","createStore","identity","arg","useStore","selector","slice","createImpl","useBoundStore","create","animateValue","from","to","duration","setter","easing","t","startTime","animate","currentTime","elapsed","progress","easedProgress","easeInOutCubic","createBookStore","initProps","DEFAULT_PROPS","set","get","count","validCount","currentPage","page","pageCount","validPage","direction","flippingPageIndex","isFlippingContinuously","newPage","continuousDirection","dims","current","newDimensions","estimatedPageCount","rotation","tilt","scale","position","hinge","opacity","color","intensity","text","width","font","enabled","score","debug","angle","targetAngle","flipped","flipNext","flipDuration","emotion","pulseCycles","maxPulses","pulseDuration","pulse","dimPulseCycles","maxDimPulses","dimPulseDuration","dimPulse","originalRotation","originalTilt","shakeIntensity","shakeCount","shakeDuration","shakes","shake","randomRotation","randomTilt","material","v","BookContext","createContext","BookProvider","storeRef","useRef","useBookStore","store","useContext","Page","index","totalPages","glow","coverWidth","coverHeight","pageWidth","pageHeight","spineDepth","isAttachedToBack","availableDepth","zOffset","jsxs","jsx","THREE","useCoverTexture","textColor","outlineColor","outlineWidth","isFront","fontFamily","useMemo","canvas","ctx","lines","fontSize","startY","line","i","y","words","maxWidth","currentLine","currentY","word","wordIndex","testLine","texture","Cover","side","height","spineWidth","coverThickness","pivotX","pivotZ","hingeRotation","Spine","depth","Particles","bookDimensions","pointsRef","positions","velocities","i3","useFrame","delta","positionAttr","effectiveIntensity","Book","bookGroupRef","dimensions","spineRotation","frontHinge","backHinge","pageOpacity","pageColor","glowIntensity","coverColor","coverOpacity","spineColor","frontCoverText","backCoverText","coverTextColor","coverOutlineColor","coverOutlineWidth","particlesEnabled","particleIntensity","testPageFlipAngle","flipProgress","flipDirection","safePosition","Fragment","Html","_","pageIndex","pageRotation","Scene","OrbitControls"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}